# 愿景
为了让接入国际化成为轻松且愉快的事😄💪🏻

# 原理

该库主要由两部分构成
1. 命令行工具
2. 函数 API

**命令行工具**：根据指定规则解析出需要翻译的文本片段，并通过翻译平台将文本片段翻译到指定目标语言，最后生成语言包文件

解析文本片段的匹配规则如下
```js
// 普通字符串
i18n('xxx')
i18n("xxx")
i18n(`xxx`)
// 支持动态参数
i18n('xxx{0}xxx', param1)
i18n('xxx{0}xxx{1}xxx{2}xxx', param1, param2)
```
**函数 API**：将国际化语言包接入到项目中，由`setI18N`和`i18n`构成

1. **setI18N**：设置语言和语言包
2. **i18n**：用于包裹被翻译文本实现国际化，也作为命令行匹配规则的标识

所以`命令行工具`和`函数 API`这两部分需紧密结合使用

# 用法

## 1. 安装
```bash
npm i i18n-pro
# 或者
yarn add i18n-pro
# 或者
pnpm i i18n-pro
```
## 2. 接入函数 API
📢📢📢：这一步最重要的是用`i18n`函数包裹带翻译的文本
### 挂载全局对象的形式
#### 引用函数
```js
import { setI18N, i18n } from 'i18n-pro'

// 需要在应用页面渲染逻辑之前
// 浏览器环境，注意：如果是Node环境需要将window替换成global
window.setI18N = setI18N
window.i18n = i18n
// 后续才是应用的页面渲染逻辑
```
#### 用 **i18n** 包裹需要翻译的文本
```js
// 被翻译的文本
const text = i18n('你好世界')
```
### 模块化引入的形式
跟挂载全局对象的唯一区别就是每个模块都需要单独引入，其他使用并无差别
```js
import { setI18N, i18n } from 'i18n-pro'
// 就是每个模块都需上面这样引入

// 被翻译的文本变量
const text = i18n('你好世界')
```
## 3. 初始化命令行配置文件
在命令行终端输入如下命令
```bash
npx i18n init
```
然后会在当前目录下生成一个`i18nrc.js`的文件
## 4. 调整`i18nrc.js`配置
根据需求执行调整配置文件的内容
## 5. 执行翻译命令
```bash
npx i18n t
```
命令执行成功的话，会在指定的目录下生成语言包文件
## 6. 引入语言包文件
语言包已经有了，就需要应用到项目中了

如果生成的语言包是每个语言单独文件形式，操作如下：
```js
import en from './i18n/en.json'
import jp from './i18n/jp.json'
// .. 其他更多语言

setI18N({
  locale: 'en',
  langs:{
    en,
    jp,
    // ...其他更多语言
  },
})
// 后续是应用页面渲染逻辑
```
如果生成的语言包是聚合的形式，操作如下：
```js
import langs from './i18n/langs.json'

setI18N({
  locale: 'en',
  langs,
})
// 后续是应用页面渲染逻辑
```
## 后续更改显示语言
正常情况下，执行如下方法就行，但是页面上以渲染的内容不会再更新，只有等对应文本的`i18n`函数重新执行，才会显示新语言对应的文本
```js
setI18N({
  locale: 'en', // 设置指定语言
})
```
